{
  "model": "gpt-4",
  "messages": [
    {
      "role": "system",
      "content": "Eres un generador de código Java experto en Spring Boot. Solo devuelve clases y tests JUnit válidos. Cada bloque debe comenzar con \"package\". No incluyas texto adicional. Solo puedes modificar o usar clases que aparecen en el código fuente incluido. No debes inventar clases nuevas ni reemplazar clases existentes a menos que se indique explícitamente. Es muy importante que NO borres los métodos existentes de las clases a menos que la historia de usuario lo requiera."
    },
    {
      "role": "user",
      "content": "--- HISTORIA DE USUARIO ---\nid: HDU-EMP-003\ntitulo: Prevenir eliminación de empleadas\nactor: Administrador del sistema\ndescripcion: >\n  Como administrador del sistema,\n  quiero que no se permita eliminar empleados de género femenino,\n  para cumplir con la normativa interna de no eliminar registros históricos sensibles.\n\ncriterios_aceptacion:\n  - Si se intenta eliminar un empleado con género \"Femenino\", se debe lanzar una excepción o retornar un error controlado.\n  - Si el empleado es de género \"Masculino\" u otro valor, se permite la eliminación normal.\n  - El método de eliminación actual debe ser modificado para incluir esta validación.\n  - No debe eliminarse ninguna lógica existente que ya esté implementada en ese método.\n  - Se deben mantener todos los métodos actuales sin eliminación ni reemplazo.\n  - La modificación debe estar delimitada por comentarios que indiquen claramente el inicio y fin del cambio realizado por la IA.\n\n\n--- DIAGNÓSTICO Y PLAN DE CLASES ---\n--- ANÁLISIS DE CLASES EXISTENTES ---\n\n| Clase Java | Clasificación | Motivo |\n|------------|----------------|--------|\n| Employee | REUTILIZABLE-AS-IS | Contiene atributo `gender` necesario para la validación. |\n| EmployeeRepository | REUTILIZABLE-AS-IS | No se requiere modificación, ya que solo se encarga de las operaciones de base de datos. |\n| EmployeeService | REUTILIZABLE-AS-IS | La interfaz del servicio no necesita modificaciones. |\n| EmployeeServiceImpl | MODIFICABLE | Necesita una modificación en el método `deleteEmployeeById` para agregar la validación requerida. |\n| EmployeeController | REUTILIZABLE-AS-IS | No se requiere modificación, ya que solo se encarga de manejar las solicitudes HTTP. |\n\n--- PLAN DE MODIFICACIÓN ---\n\n1. Clase `EmployeeServiceImpl`: Modificar el método `deleteEmployeeById` para agregar una validación que verifique el género del empleado antes de eliminarlo. Si el género es \"Femenino\", se debe lanzar una excepción. Si el género es \"Masculino\" u otro valor, se permite la eliminación normal.\n\n--- CÓDIGO A GENERAR ---\n\nNo se proporcionará código en esta etapa, ya que solo se solicita un análisis de las clases existentes y un plan de modificación. El código se proporcionará en la siguiente etapa del proceso.\n\n--- INSTRUCCIONES DE GENERACIÓN DE CÓDIGO ---\n- Modifica únicamente las clases marcadas como MODIFICABLE.\n- Crea nuevas clases solo si están indicadas como NUEVA.\n- No cambies de paquete ni nombre de clase.\n- Si modificas un método, inclúyelo completo con su lógica anterior más la nueva.\n- No omitas lógica existente.\n- Cada clase debe comenzar con `package ...`.\n- Devuelve únicamente clases y tests JUnit 5 válidos.\n- No incluyas explicaciones ni comentarios adicionales."
    }
  ],
  "temperature": 0.3
}
